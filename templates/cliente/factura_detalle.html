{% extends 'base.html' %}

{% block title %}Detalle de Factura{% endblock %}

{% block content %}
<div class="contenido">
    <h2>Factura #<span id="facturaId"></span></h2>
    <div id="cabeceraFactura">
        <p><b>Cliente:</b> <span id="clienteNombre"></span></p>
        <p><b>Fecha:</b> <span id="fecha"></span></p>
        <p><b>Moneda:</b> <span id="moneda"></span></p>
        <p><b>Total:</b> <span id="total"></span></p>
    </div>
    <h3>Líneas de la factura</h3>
    <table>
        <thead>
            <tr>
                <th>Producto</th>
                <th>Cantidad</th>
                <th>Precio unitario</th>
                <th>Subtotal</th>
            </tr>
        </thead>
        <tbody id="lineasFactura">
            <!-- JS -->
        </tbody>
    </table>
    <h3>Pagos</h3>
    <table>
        <thead>
            <tr>
                <th>Fecha</th>
                <th>Método</th>
                <th>Cantidad</th>
            </tr>
        </thead>
        <tbody id="pagosFactura">
            <!-- JS -->
        </tbody>
    </table>
    <p><b>Total pagado:</b> <span id="totalPagado"></span></p>
    <p><b>Pendiente:</b> <span id="pendiente"></span></p>

    <button id="descargarPdfBtn">Descargar PDF</button>
</div>

<h3>Registrar nuevo pago</h3>
<form id="formAgregarPago">
    <label>Monto: <input type="number" step="0.01" name="cantidad" required></label>
    <label>Método de pago:
        <select name="metodo_pago" required>
            <option value="">Selecciona...</option>
            <option value="Contado">Contado</option>
            <option value="Tarjeta">Tarjeta</option>
            <option value="Transferencia">Transferencia</option>
            <option value="Otro">Otro</option>
        </select>
    </label>
    <label>Fecha: <input type="date" name="fecha_pago" required></label>
    <button type="submit">Agregar pago</button>
</form>
<p id="pagoMensaje" style="color: green;"></p>
{% endblock %}

{% block scripts %}
<script src="{{ url_for('static', filename='js/factura_detalle.js') }}"></script>
{% endblock %}